{"version":3,"sources":["components/Auth/AuthForm.module.css","components/Profile/ProfileForm.module.css","components/Layout/MainNavigation.module.css","components/Profile/UserProfile.module.css","components/StartingPage/StartingPageContent.module.css","store/auth-context.js","components/Layout/MainNavigation.js","components/Layout/Layout.js","components/Profile/ProfileForm.js","components/Profile/UserProfile.js","components/Auth/AuthForm.js","pages/AuthPage.js","components/StartingPage/StartingPageContent.js","pages/HomePage.js","components/NotFound.js","App.js","index.js"],"names":["module","exports","AuthContext","React","createContext","token","isLoggedIn","login","logout","AuthContextProvider","props","initialToken","localStorage","getItem","useState","setToken","logoutHandler","removeItem","contextValue","expirationTime","setItem","currentTime","Date","getTime","calculateRemainingTime","setTimeout","console","log","Provider","value","children","MainNavigation","authCtx","useContext","className","classes","header","to","logo","onClick","Layout","ProfileForm","history","useHistory","newPasswordInputRef","useRef","form","onSubmit","event","preventDefault","enteredNewPassword","current","fetch","method","body","JSON","stringify","idToken","password","returnSecureToken","headers","then","res","replace","control","htmlFor","type","id","minLength","ref","action","UserProfile","profile","AuthForm","emailInputRef","passwordInputRef","isLogin","setIsLogin","isLoading","setIsLoading","auth","url","enteredEmail","enteredPassword","email","ok","json","data","Error","catch","err","alert","message","required","actions","toggle","prevState","AuthPage","StartingPageContent","starting","HomePage","NotFound","App","path","exact","NoMatch","component","location","useLocation","pathname","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2ec110e1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"AuthForm_auth__MPw6W\",\"control\":\"AuthForm_control__2fVSU\",\"actions\":\"AuthForm_actions__1VNhY\",\"toggle\":\"AuthForm_toggle__21tnB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ProfileForm_form__2xGgc\",\"control\":\"ProfileForm_control__2YUZH\",\"action\":\"ProfileForm_action__opJ_6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"MainNavigation_header__2lqQ1\",\"logo\":\"MainNavigation_logo__1TgMx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"UserProfile_profile__gQOnH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"starting\":\"StartingPageContent_starting__kwCvL\"};","import React, { useState } from 'react';\n\nconst AuthContext = React.createContext({\ntoken: '',\nisLoggedIn: false,\nlogin: (token) => {},\nlogout: () => {},\n});\n\nconst calculateRemainingTime = (expirationTime)=>{\nconst currentTime = new Date().getTime();\nconst adjExpirationTime = new Date(expirationTime).getTime();\n\nconst remainingDuration = adjExpirationTime - currentTime;\nreturn remainingDuration;\n}\n\nexport const AuthContextProvider = (props) => {\nconst initialToken = localStorage.getItem('token')\nconst [token, setToken] = useState(initialToken);\n\nconst userIsLoggedIn = !!token;\n\nconst logoutHandler = () => {\nsetToken(null);\nlocalStorage.removeItem('token', token);\n};\n\nconst loginHandler = (token, expirationTime) => {\nsetToken(token);\nlocalStorage.setItem('token', token);\nconst remainingTime = calculateRemainingTime(expirationTime);\nsetTimeout(logoutHandler, 3600000);\nconsole.log(expirationTime)\n};\n\nconst contextValue = {\ntoken: token,\nisLoggedIn: userIsLoggedIn,\nlogin: loginHandler,\nlogout: logoutHandler,\n};\n\nreturn (\n<AuthContext.Provider value={contextValue}>\n{props.children}\n</AuthContext.Provider>\n);\n};\n\nexport default AuthContext;","import { useContext } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport AuthContext from '../../store/auth-context';\nimport classes from './MainNavigation.module.css';\n\nconst MainNavigation = () => {\n  const authCtx = useContext(AuthContext);\n\n  const isLoggedIn = authCtx.isLoggedIn;\n\n  const logoutHandler = () => {\n    authCtx.logout();\n    // optional: redirect the user\n  };\n\n  return (\n    <header className={classes.header}>\n      <Link to='/'>\n        <div className={classes.logo}>React Auth</div>\n      </Link>\n      <nav>\n        <ul>\n          {!isLoggedIn && (\n            <li>\n              <Link to='/auth'>Login</Link>\n            </li>\n          )}\n          {isLoggedIn && (\n            <li>\n              <Link to='/profile'>Profile</Link>\n            </li>\n          )}\n          {isLoggedIn && (\n            <li>\n              <button onClick={logoutHandler}>Logout</button>\n            </li>\n          )}\n        </ul>\n      </nav>\n    </header>\n  );\n};\n\nexport default MainNavigation;","import { Fragment } from 'react';\n\nimport MainNavigation from './MainNavigation';\n\nconst Layout = (props) => {\n  return (\n    <Fragment>\n      <MainNavigation />\n      <main>{props.children}</main>\n    </Fragment>\n  );\n};\n\nexport default Layout;\n","import { useRef, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport AuthContext from '../../store/auth-context';\nimport classes from './ProfileForm.module.css';\n\nconst ProfileForm = () => {\n  const history = useHistory();\nconst newPasswordInputRef = useRef();\nconst authCtx = useContext(AuthContext);\n\nconst submitHandler = (event) => {\nevent.preventDefault();\n\nconst enteredNewPassword = newPasswordInputRef.current.value;\n\n// add validation\n\nfetch('https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyBOY-Y4RykiUKME-IVBLrDGGcel9VUpch8', {\nmethod: 'POST',\nbody: JSON.stringify({\nidToken: authCtx.token,\npassword: enteredNewPassword,\nreturnSecureToken: false\n}),\nheaders: {\n'Content-Type': 'application/json'\n}\n}).then(res => {\n// assumption: Always succeeds!\nhistory.replace('/');\n});\n};\n\nreturn (\n<form className={classes.form} onSubmit={submitHandler}>\n<div className={classes.control}>\n<label htmlFor='new-password'>New Password</label>\n<input type='password' id='new-password' minLength=\"7\" ref={newPasswordInputRef} />\n</div>\n<div className={classes.action}>\n<button>Change Password</button>\n</div>\n</form>\n);\n};\n\nexport default ProfileForm;\n","import ProfileForm from './ProfileForm';\nimport classes from './UserProfile.module.css';\n\nconst UserProfile = () => {\n  return (\n    <section className={classes.profile}>\n      <h1>Your User Profile</h1>\n      <ProfileForm />\n    </section>\n  );\n};\n\nexport default UserProfile;\n","import { useState, useRef, useContext } from 'react';\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\n\nimport AuthContext from '../../store/auth-context';\nimport classes from './AuthForm.module.css';\n\nconst AuthForm = () => {\nconst history = useHistory();\nconst emailInputRef = useRef();\nconst passwordInputRef = useRef();\n\nconst authCtx = useContext(AuthContext);\n\nconst [isLogin, setIsLogin] = useState(true);\nconst [isLoading, setIsLoading] = useState(false);\n\nconst switchAuthModeHandler = () => {\nsetIsLogin((prevState) => !prevState);\n};\n\nconst submitHandler = (event) => {\nevent.preventDefault();\n\nconst enteredEmail = emailInputRef.current.value;\nconst enteredPassword = passwordInputRef.current.value;\n\n// optional: Add validation\n\nsetIsLoading(true);\nlet url;\nif (isLogin) {\nurl =\n'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBOY-Y4RykiUKME-IVBLrDGGcel9VUpch8';\n} else {\nurl =\n'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBOY-Y4RykiUKME-IVBLrDGGcel9VUpch8';\n}\nfetch(url, {\nmethod: 'POST',\nbody: JSON.stringify({\nemail: enteredEmail,\npassword: enteredPassword,\nreturnSecureToken: true,\n}),\nheaders: {\n'Content-Type': 'application/json',\n},\n})\n.then((res) => {\nsetIsLoading(false);\nif (res.ok) {\nreturn res.json();\n} else {\nreturn res.json().then((data) => {\nlet errorMessage = 'Authentication failed!';\n// if (data && data.error && data.error.message) {\n// errorMessage = data.error.message;\n// }\n\nthrow new Error(errorMessage);\n});\n}\n})\n.then((data) => {\nauthCtx.login(data.idToken);\nhistory.replace('/');\n})\n.catch((err) => {\nalert(err.message);\n});\n};\n\nreturn (\n<section className={classes.auth}>\n<h1>{isLogin ? 'Login' : 'Sign Up'}</h1>\n<form onSubmit={submitHandler}>\n<div className={classes.control}>\n<label htmlFor='email'>Your Email</label>\n<input type='email' id='email' required ref={emailInputRef} />\n</div>\n<div className={classes.control}>\n<label htmlFor='password'>Your Password</label>\n<input\ntype='password'\nid='password'\nrequired\nref={passwordInputRef}\n/>\n</div>\n<div className={classes.actions}>\n{!isLoading && (\n<button>{isLogin ? 'Login' : 'Create Account'}</button>\n)}\n{isLoading && <p>Sending request...</p>}\n<button\ntype='button'\nclassName={classes.toggle}\nonClick={switchAuthModeHandler}\n>\n{isLogin ? 'Create new account' : 'Login with existing account'}\n</button>\n</div>\n</form>\n</section>\n);\n};\n\nexport default AuthForm;","import AuthForm from '../components/Auth/AuthForm';\n\nconst AuthPage = () => {\n  return <AuthForm />;\n};\n\nexport default AuthPage;\n","import classes from './StartingPageContent.module.css';\n\nconst StartingPageContent = () => {\n  return (\n    <section className={classes.starting}>\n      <h1>Welcome on Board!</h1>\n    </section>\n  );\n};\n\nexport default StartingPageContent;\n","import StartingPageContent from '../components/StartingPage/StartingPageContent';\n\nconst HomePage = () => {\n  return <StartingPageContent />;\n};\n\nexport default HomePage;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst NotFound = () => (\n  <div>\n    <h1>404 - Not Found!</h1>\n    <Link to=\"/\">Go Home</Link>\n  </div>\n);\n\nexport default NotFound;","import { useContext } from 'react';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Link,\n  Switch,\n  Redirect,\n  useLocation\n} from \"react-router-dom\";\n\nimport Layout from './components/Layout/Layout';\nimport UserProfile from './components/Profile/UserProfile';\nimport AuthPage from './pages/AuthPage';\nimport HomePage from './pages/HomePage';\nimport AuthContext from './store/auth-context';\nimport NotFound from './components/NotFound';\n\nfunction App() {\n  const authCtx = useContext(AuthContext);\n\n  return (\n    <Layout>\n      <Switch>\n        <Route path='/' exact>\n          <HomePage />\n        </Route>\n        {!authCtx.isLoggedIn && (\n          <Route path='/auth'>\n            <AuthPage />\n          </Route>\n        )}\n        <Route path='/profile'>\n          {authCtx.isLoggedIn && <UserProfile />}\n          {!authCtx.isLoggedIn && <Redirect to='/auth' />}\n        </Route>\n        <Route path=\"*\">\n            <NoMatch />\n          </Route>\n        <Route component={NotFound} />\n      </Switch>\n    </Layout>\n  );\n}\n\nexport default App;\n\nfunction NoMatch() {\n  let location = useLocation();\n\n  return (\n    <div>\n      <h3>\n        No match for <code>{location.pathname}</code>\n      </h3>\n    </div>\n  );\n}\n","import ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport './index.css';\nimport App from './App';\nimport { AuthContextProvider } from './store/auth-context';\n\nReactDOM.render(\n  <AuthContextProvider>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </AuthContextProvider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}