{"ast":null,"code":"import _slicedToArray from\"/home/zorica/\\u0420\\u0430\\u0434\\u043D\\u0430 \\u043F\\u043E\\u0432\\u0440\\u0448\\u0438\\u043D\\u0430/react/vezbanje/auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/React.createContext({token:'',isLoggedIn:false,login:function login(token){},logout:function logout(){}});//const calculateRemainingTime = (expirationTime)=>{\n//const currentTime = new Date().getTime();\n//const adjExpirationTime = new Date(expirationTime).getTime();\n//const remainingDuration = adjExpirationTime - currentTime;\n//return remainingDuration;\n//}\nexport var AuthContextProvider=function AuthContextProvider(props){var initialToken=localStorage.getItem('token');var _useState=useState(initialToken),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var userIsLoggedIn=!!token;var logoutHandler=function logoutHandler(){setToken(null);localStorage.removeItem('token',token);};var loginHandler=function loginHandler(token,expirationTime){setToken(token);localStorage.setItem('token',token);//const remainingTime = calculateRemainingTime(expirationTime);\nsetTimeout(logoutHandler,3600000);console.log(expirationTime);};var contextValue={token:token,isLoggedIn:userIsLoggedIn,login:loginHandler,logout:logoutHandler};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:contextValue,children:props.children});};export default AuthContext;","map":{"version":3,"sources":["/home/zorica/Радна површина/react/vezbanje/auth/src/store/auth-context.js"],"names":["React","useState","AuthContext","createContext","token","isLoggedIn","login","logout","AuthContextProvider","props","initialToken","localStorage","getItem","setToken","userIsLoggedIn","logoutHandler","removeItem","loginHandler","expirationTime","setItem","setTimeout","console","log","contextValue","children"],"mappings":"sMAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,C,2CAEA,GAAMC,CAAAA,WAAW,cAAGF,KAAK,CAACG,aAAN,CAAoB,CACxCC,KAAK,CAAE,EADiC,CAExCC,UAAU,CAAE,KAF4B,CAGxCC,KAAK,CAAE,eAACF,KAAD,CAAW,CAAE,CAHoB,CAIxCG,MAAM,CAAE,iBAAM,CAAE,CAJwB,CAApB,CAApB,CAOA;AACA;AACA;AAEA;AACA;AACA;AAEA,MAAO,IAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,KAAD,CAAW,CAC9C,GAAMC,CAAAA,YAAY,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAArB,CACA,cAA0BX,QAAQ,CAACS,YAAD,CAAlC,wCAAON,KAAP,eAAcS,QAAd,eAEA,GAAMC,CAAAA,cAAc,CAAG,CAAC,CAACV,KAAzB,CAEA,GAAMW,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC5BF,QAAQ,CAAC,IAAD,CAAR,CACAF,YAAY,CAACK,UAAb,CAAwB,OAAxB,CAAiCZ,KAAjC,EACC,CAHD,CAKA,GAAMa,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACb,KAAD,CAAQc,cAAR,CAA2B,CAChDL,QAAQ,CAACT,KAAD,CAAR,CACAO,YAAY,CAACQ,OAAb,CAAqB,OAArB,CAA8Bf,KAA9B,EACA;AACAgB,UAAU,CAACL,aAAD,CAAgB,OAAhB,CAAV,CACAM,OAAO,CAACC,GAAR,CAAYJ,cAAZ,EACC,CAND,CAQA,GAAMK,CAAAA,YAAY,CAAG,CACrBnB,KAAK,CAAEA,KADc,CAErBC,UAAU,CAAES,cAFS,CAGrBR,KAAK,CAAEW,YAHc,CAIrBV,MAAM,CAAEQ,aAJa,CAArB,CAOA,mBACA,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEQ,YAA7B,UACCd,KAAK,CAACe,QADP,EADA,CAKC,CA/BM,CAiCP,cAAetB,CAAAA,WAAf","sourcesContent":["import React, { useState } from 'react';\n\nconst AuthContext = React.createContext({\ntoken: '',\nisLoggedIn: false,\nlogin: (token) => {},\nlogout: () => {},\n});\n\n//const calculateRemainingTime = (expirationTime)=>{\n//const currentTime = new Date().getTime();\n//const adjExpirationTime = new Date(expirationTime).getTime();\n\n//const remainingDuration = adjExpirationTime - currentTime;\n//return remainingDuration;\n//}\n\nexport const AuthContextProvider = (props) => {\nconst initialToken = localStorage.getItem('token')\nconst [token, setToken] = useState(initialToken);\n\nconst userIsLoggedIn = !!token;\n\nconst logoutHandler = () => {\nsetToken(null);\nlocalStorage.removeItem('token', token);\n};\n\nconst loginHandler = (token, expirationTime) => {\nsetToken(token);\nlocalStorage.setItem('token', token);\n//const remainingTime = calculateRemainingTime(expirationTime);\nsetTimeout(logoutHandler, 3600000);\nconsole.log(expirationTime)\n};\n\nconst contextValue = {\ntoken: token,\nisLoggedIn: userIsLoggedIn,\nlogin: loginHandler,\nlogout: logoutHandler,\n};\n\nreturn (\n<AuthContext.Provider value={contextValue}>\n{props.children}\n</AuthContext.Provider>\n);\n};\n\nexport default AuthContext;"]},"metadata":{},"sourceType":"module"}