{"ast":null,"code":"import _slicedToArray from\"/home/zorica/\\u0420\\u0430\\u0434\\u043D\\u0430 \\u043F\\u043E\\u0432\\u0440\\u0448\\u0438\\u043D\\u0430/react/React - The Complete Guide (incl Hooks, React Router, Redux)/[TutsNode.com] - React - The Complete Guide (incl Hooks, React Router, Redux)/22 Adding Authentication To React Apps/01-starting-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/React.createContext({token:'',isLoggedIn:false,login:function login(token){},logout:function logout(){}});var calculateRemainingTime=function calculateRemainingTime(expirationTime){var currentTime=new Date().getTime();var adjExpirationTime=new Date(expirationTime).getTime();var remainingDuration=adjExpirationTime-currentTime;return remainingDuration;};export var AuthContextProvider=function AuthContextProvider(props){var initialToken=localStorage.getItem('token');var _useState=useState(initialToken),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var userIsLoggedIn=!!token;var logoutHandler=function logoutHandler(){setToken(null);localStorage.removeItem('token',token);};var loginHandler=function loginHandler(token,expirationTime){setToken(token);localStorage.setItem('token',token);var remainingTime=calculateRemainingTime(expirationTime);setTimeout(logoutHandler,3600000);console.log(expirationTime);};var contextValue={token:token,isLoggedIn:userIsLoggedIn,login:loginHandler,logout:logoutHandler};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:contextValue,children:props.children});};export default AuthContext;","map":{"version":3,"sources":["/home/zorica/Радна површина/react/React - The Complete Guide (incl Hooks, React Router, Redux)/[TutsNode.com] - React - The Complete Guide (incl Hooks, React Router, Redux)/22 Adding Authentication To React Apps/01-starting-project/src/store/auth-context.js"],"names":["React","useState","AuthContext","createContext","token","isLoggedIn","login","logout","calculateRemainingTime","expirationTime","currentTime","Date","getTime","adjExpirationTime","remainingDuration","AuthContextProvider","props","initialToken","localStorage","getItem","setToken","userIsLoggedIn","logoutHandler","removeItem","loginHandler","setItem","remainingTime","setTimeout","console","log","contextValue","children"],"mappings":"8XAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,C,2CAEA,GAAMC,CAAAA,WAAW,cAAGF,KAAK,CAACG,aAAN,CAAoB,CACxCC,KAAK,CAAE,EADiC,CAExCC,UAAU,CAAE,KAF4B,CAGxCC,KAAK,CAAE,eAACF,KAAD,CAAW,CAAE,CAHoB,CAIxCG,MAAM,CAAE,iBAAM,CAAE,CAJwB,CAApB,CAApB,CAOA,GAAMC,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAACC,cAAD,CAAkB,CACjD,GAAMC,CAAAA,WAAW,CAAG,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,EAApB,CACA,GAAMC,CAAAA,iBAAiB,CAAG,GAAIF,CAAAA,IAAJ,CAASF,cAAT,EAAyBG,OAAzB,EAA1B,CAEA,GAAME,CAAAA,iBAAiB,CAAGD,iBAAiB,CAAGH,WAA9C,CACA,MAAOI,CAAAA,iBAAP,CACC,CAND,CAQA,MAAO,IAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,KAAD,CAAW,CAC9C,GAAMC,CAAAA,YAAY,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAArB,CACA,cAA0BlB,QAAQ,CAACgB,YAAD,CAAlC,wCAAOb,KAAP,eAAcgB,QAAd,eAEA,GAAMC,CAAAA,cAAc,CAAG,CAAC,CAACjB,KAAzB,CAEA,GAAMkB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC5BF,QAAQ,CAAC,IAAD,CAAR,CACAF,YAAY,CAACK,UAAb,CAAwB,OAAxB,CAAiCnB,KAAjC,EACC,CAHD,CAKA,GAAMoB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACpB,KAAD,CAAQK,cAAR,CAA2B,CAChDW,QAAQ,CAAChB,KAAD,CAAR,CACAc,YAAY,CAACO,OAAb,CAAqB,OAArB,CAA8BrB,KAA9B,EACA,GAAMsB,CAAAA,aAAa,CAAGlB,sBAAsB,CAACC,cAAD,CAA5C,CACAkB,UAAU,CAACL,aAAD,CAAgB,OAAhB,CAAV,CACAM,OAAO,CAACC,GAAR,CAAYpB,cAAZ,EACC,CAND,CAQA,GAAMqB,CAAAA,YAAY,CAAG,CACrB1B,KAAK,CAAEA,KADc,CAErBC,UAAU,CAAEgB,cAFS,CAGrBf,KAAK,CAAEkB,YAHc,CAIrBjB,MAAM,CAAEe,aAJa,CAArB,CAOA,mBACA,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEQ,YAA7B,UACCd,KAAK,CAACe,QADP,EADA,CAKC,CA/BM,CAiCP,cAAe7B,CAAAA,WAAf","sourcesContent":["import React, { useState } from 'react';\n\nconst AuthContext = React.createContext({\ntoken: '',\nisLoggedIn: false,\nlogin: (token) => {},\nlogout: () => {},\n});\n\nconst calculateRemainingTime = (expirationTime)=>{\nconst currentTime = new Date().getTime();\nconst adjExpirationTime = new Date(expirationTime).getTime();\n\nconst remainingDuration = adjExpirationTime - currentTime;\nreturn remainingDuration;\n}\n\nexport const AuthContextProvider = (props) => {\nconst initialToken = localStorage.getItem('token')\nconst [token, setToken] = useState(initialToken);\n\nconst userIsLoggedIn = !!token;\n\nconst logoutHandler = () => {\nsetToken(null);\nlocalStorage.removeItem('token', token);\n};\n\nconst loginHandler = (token, expirationTime) => {\nsetToken(token);\nlocalStorage.setItem('token', token);\nconst remainingTime = calculateRemainingTime(expirationTime);\nsetTimeout(logoutHandler, 3600000);\nconsole.log(expirationTime)\n};\n\nconst contextValue = {\ntoken: token,\nisLoggedIn: userIsLoggedIn,\nlogin: loginHandler,\nlogout: logoutHandler,\n};\n\nreturn (\n<AuthContext.Provider value={contextValue}>\n{props.children}\n</AuthContext.Provider>\n);\n};\n\nexport default AuthContext;"]},"metadata":{},"sourceType":"module"}